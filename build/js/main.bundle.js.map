{"version":3,"sources":["webpack://kekstagram/./source/js/util.js","webpack://kekstagram/./source/js/replace-comments.js","webpack://kekstagram/./source/js/show-full-image.js","webpack://kekstagram/./source/js/render-pictures.js","webpack://kekstagram/./source/js/sort-images.js","webpack://kekstagram/./source/js/api.js","webpack://kekstagram/./source/js/replace-image.js","webpack://kekstagram/./source/js/change-scale.js","webpack://kekstagram/./source/js/filter.js","webpack://kekstagram/./source/js/validate.js"],"names":["body","document","querySelector","main","sliderElement","noEffectButton","fullImageOverlay","overlay","commentTextArea","hashtagInput","imageScale","innerImage","lessSizeButton","moreSizeButton","args","isEscButton","evt","key","createNewElement","tag","elementClass","newElement","createElement","classList","add","createSlider","noUiSlider","create","range","min","max","start","step","connect","closeOverlay","remove","setToDefault","closeOnEscButtonOverlay","preventDefault","checked","contains","destroy","value","style","transform","filter","src","disabled","showAlert","id","selector","fragment","createDocumentFragment","element","content","cloneNode","appendChild","elementMessage","inner","addEventListener","window","target","commentsList","fullImage","closeModal","likesCount","commentsCount","imageDescription","socialCounter","loadButton","pictures","picture","renderPictures","picturesArray","querySelectorAll","forEach","item","url","likes","comments","photoElement","textContent","length","index","innerHTML","currentComments","description","loadComments","showComments","removeEventListener","slice","comment","newListItem","userAvatar","avatar","name","message","alt","commentText","replaceComments","showFullImage","sort","sortForm","defaultSetting","randomSetting","popularSetting","getRandomArrayElement","swap","Math","ceil","floor","random","getRandom","formSubmit","upload","FILE_TYPES","file","files","fileName","toLowerCase","some","it","endsWith","reader","FileReader","result","readAsDataURL","replaceImage","currentSize","replace","valueElement","chromeEffectButton","sepiaEffectButton","marvinEffectButton","phobosEffectButton","heatEffectButton","updateFilter","filterName","unit","on","_","handle","unencoded","setAttribute","updateOptions","set","onFailure","onfocus","onblur","trim","setCustomValidity","input","error","erorrsArray","hashtags","split","push","originalHashtag","originality","hashtag","hashtagLowerCase","includes","checkOriginality","test","indexOf","isValidHastag","validateHashtag","join","checkHashtagInput","alertContainer","zIndex","position","left","top","right","border","fontSize","lineHeight","width","minHeight","backgroundColor","textAlign","paddingTop","paddingBottom","margin","color","append","setTimeout","fetch","then","response","ok","json","debounce","activeButton","randomArrayLength","OriginalPictures","Set","size","Array","from","getRandomArray","sortRandom","a","b","sortByComments","sortImages","catch","onSuccess","method","sendData","FormData"],"mappings":"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","file":"main.bundle.js","sourcesContent":["/* global noUiSlider:readonly */\nconst body = document.querySelector('body');\nconst main = document.querySelector('main');\nconst sliderElement = document.querySelector('.effect-level__slider');\nconst noEffectButton = document.querySelector('#effect-none');\nconst fullImageOverlay = document.querySelector('.big-picture');\nconst overlay = document.querySelector('.img-upload__overlay');\nconst commentTextArea = document.querySelector('.text__description');\nconst hashtagInput = document.querySelector('.text__hashtags');\nconst imageScale = document.querySelector('.scale__control--value');\nconst imageContainer = document.querySelector('.img-upload__preview');\nconst innerImage = imageContainer.querySelector('img');\nconst lessSizeButton = document.querySelector('.scale__control--smaller');\nconst moreSizeButton = document.querySelector('.scale__control--bigger');\n\nconst ALERT_TIMER = 5000;\n\nconst args = {\n  successId: '#success',\n  successClass: '.success',\n  errorId: '#error',\n  errorClass: '.error',\n};\n\nconst getRandom = function (min, max) {\n  if (min > max) {\n    let swap = min;\n    min = max;\n    max = swap;\n  }\n\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\nconst isEscButton = function (evt) {\n  return evt.key === ('Escape' || 'Esc');\n};\n\nconst createNewElement = function(tag, elementClass){\n  const newElement = document.createElement(tag);\n  newElement.classList.add(elementClass);\n  return newElement\n}\n\nconst createSlider = function () {\n  noUiSlider.create(sliderElement, {\n    range: {\n      min: 0,\n      max: 1,\n    },\n    start: 0,\n    step: 0.1,\n    connect: 'lower',\n  });\n};\n\nconst closeOverlay = function () {\n  overlay.classList.add('hidden'),\n  body.classList.remove('modal-open');\n  setToDefault();\n};\n\nconst closeOnEscButtonOverlay = function (evt) {\n  if (isEscButton(evt)) {\n    evt.preventDefault();\n    overlay.classList.add('hidden'),\n    body.classList.remove('modal-open');\n    setToDefault();\n  }\n};\n\nconst closeOverlayPicture = function () {\n  fullImageOverlay.classList.add('hidden');\n  body.classList.remove('modal-open');\n};\n\nconst closeOnEscOverlayPicture = function (evt) {\n  if (isEscButton(evt)) {\n    evt.preventDefault();\n    fullImageOverlay.classList.add('hidden');\n    body.classList.remove('modal-open');\n  }\n};\n\nconst setToDefault = function () {\n  noEffectButton.checked = true;\n\n  if (sliderElement.classList.contains('noUi-target')) {\n    sliderElement.noUiSlider.destroy();\n  }\n\n  imageScale.value = '100%';\n  innerImage.style.transform = 'scale(1)';\n  innerImage.style.filter = 'none';\n  innerImage.src = '';\n  lessSizeButton.disabled = false;\n  moreSizeButton.disabled = true;\n  hashtagInput.value = '';\n  commentTextArea.value = '';\n};\n\nconst showAlert = function (id, selector) {\n  closeOverlay();\n\n  const fragment = document.createDocumentFragment();\n  const template = document.querySelector(id).content;\n  const message = template.querySelector(selector);\n\n  const element = message.cloneNode(true);\n\n  fragment.appendChild(element);\n  main.appendChild(fragment);\n\n  const elementMessage = document.querySelector(selector);\n  const inner = document.querySelector(selector + '__inner');\n  const closeMessage = document.querySelector(selector + '__button');\n\n  closeMessage.addEventListener('click', function () {\n    setToDefault();\n    elementMessage.remove();\n  });\n\n  window.addEventListener('keydown', function (evt) {\n    if (isEscButton(evt)) {\n      evt.preventDefault();\n      setToDefault();\n      elementMessage.remove();\n    }\n  });\n\n  const handler = function (evt) {\n    if (!inner.contains(evt.target)) {\n      setToDefault();\n      elementMessage.remove();\n    }\n  };\n\n  elementMessage.addEventListener('click', handler);\n};\n\nconst failToGetAlert = function (message) {\n  const alertContainer = document.createElement('div');\n  alertContainer.style.zIndex = 100;\n  alertContainer.style.position = 'absolute';\n  alertContainer.style.left = 0;\n  alertContainer.style.top = 0;\n  alertContainer.style.right = 0;\n  alertContainer.style.border = 'solid 2px red';\n  alertContainer.style.fontSize = '24px';\n  alertContainer.style.lineHeight = '30px';\n  alertContainer.style.width = '50%';\n  alertContainer.style.minHeight = '10%';\n  alertContainer.style.backgroundColor = 'white';\n  alertContainer.style.textAlign = 'center';\n  alertContainer.style.paddingTop = '10px';\n  alertContainer.style.paddingBottom = '10px';\n  alertContainer.style.margin = '0 auto';\n  alertContainer.style.color = 'black';\n  alertContainer.textContent = message;\n\n  document.body.append(alertContainer);\n\n  setTimeout(() => {\n    alertContainer.remove();\n  }, ALERT_TIMER);\n};\n\nexport {\n  getRandom,\n  isEscButton,\n  createSlider,\n  closeOnEscButtonOverlay,\n  closeOverlay,\n  closeOverlayPicture,\n  closeOnEscOverlayPicture,\n  showAlert,\n  createNewElement,\n  args,\n  failToGetAlert\n};\n","const commentsList = document.querySelector('.social__comments');\n\nimport { createNewElement } from './util.js';\n\nconst replaceComments = function (currentComments, comments) {\n  const fragment = document.createDocumentFragment();\n  comments.slice(0, currentComments).forEach(comment => {\n    const newListItem = createNewElement('li', 'social__comment');\n    const userAvatar = createNewElement('img', 'social__picture');\n    const { avatar, name, message } = comment;\n    userAvatar.src = avatar;\n    userAvatar.alt = name;\n    newListItem.appendChild(userAvatar);\n    const commentText = createNewElement('p', 'social__text')\n    commentText.textContent = message;\n    newListItem.appendChild(commentText);\n    fragment.appendChild(newListItem);\n  });\n  commentsList.appendChild(fragment);\n};\n\nexport { replaceComments };\n","import { closeOnEscOverlayPicture, closeOverlayPicture } from './util.js';\nimport { replaceComments } from './replace-comments.js';\n\nconst fullImageOverlay = document.querySelector('.big-picture');\nconst fullImage = document.querySelector('.big-picture__img').querySelector('img');\nconst closeModal = document.querySelector('.big-picture__cancel');\nconst likesCount = document.querySelector('.likes-count');\nconst commentsCount = document.querySelector('.comments-count');\nconst commentsList = document.querySelector('.social__comments');\nconst imageDescription = document.querySelector('.social__caption');\nconst socialCounter = document.querySelector('.social__comment-count');\nconst body = document.querySelector('body');\nconst loadButton = document.querySelector('.comments-loader');\nconst COMMENTS_START_VALUE = 5;\nconst COMMENTS_STEP = 5;\n\nconst showFullImage = function (picturesArray) {\n  const pictures = document.querySelectorAll('.picture');\n\n  pictures.forEach((picture, index) => {\n    picture.addEventListener('click', () => {\n      fullImageOverlay.classList.remove('hidden');\n      body.classList.add('modal-open');\n      commentsList.innerHTML = '';\n\n      let currentComments = COMMENTS_START_VALUE;\n      const { url, likes, comments, description } = picturesArray[index];\n      fullImage.src = url;\n      likesCount.textContent = likes;\n      commentsCount.textContent = comments.length;\n      imageDescription.textContent = description;\n\n      const loadComments = function () {\n        currentComments += COMMENTS_STEP;\n        socialCounter.textContent =\n          currentComments + ' из ' + comments.length + ' комментариев';\n        showComments();\n      };\n\n      const showComments = function () {\n        commentsList.innerHTML = '';\n        loadButton.classList.remove('hidden');\n        socialCounter.textContent =\n          currentComments + ' из ' + comments.length + ' комментариев';\n\n        if (comments.length <= currentComments) {\n          loadButton.classList.add('hidden');\n          loadButton.removeEventListener('click', loadComments);\n          socialCounter.textContent =\n            comments.length + ' из ' + comments.length + ' комментариев';\n        }\n\n        replaceComments(currentComments, comments);\n      };\n\n      showComments();\n\n      if (comments.length > COMMENTS_START_VALUE) {\n        loadButton.addEventListener('click', loadComments);\n      }\n    });\n  });\n};\n\ncloseModal.addEventListener('click', closeOverlayPicture);\n\nwindow.addEventListener('keydown', closeOnEscOverlayPicture);\n\nexport { showFullImage };\n","import { showFullImage } from './show-full-image.js';\nconst pictures = document.querySelector('.pictures');\nconst pictureFragment = document.querySelector('#picture').content;\nconst picture = pictureFragment.querySelector('.picture');\n\nconst removePictures = function(){\n  document.querySelectorAll('.picture').forEach((item) => item.remove())\n}\n\nconst renderPictures = function (picturesArray) {\n  removePictures();\n  const fragment = document.createDocumentFragment();\n  picturesArray.forEach(({ url, likes, comments }) => {\n    const photoElement = picture.cloneNode(true);\n    photoElement.querySelector('.picture__img').src = url;\n    photoElement.querySelector('.picture__comments').textContent =\n      comments.length;\n    photoElement.querySelector('.picture__likes').textContent = likes;\n    fragment.appendChild(photoElement);\n  });\n\n  pictures.appendChild(fragment);\n  showFullImage(picturesArray);\n};\nexport { renderPictures, removePictures };\n","/* global _:readonly */\nimport { getRandom } from './util.js';\nimport { renderPictures } from './render-pictures.js';\nconst RANDOM_PICTURES_NUMBER = 10;\nconst SET_DELAY = 500;\n\nconst sort = document.querySelector('.img-filters');\nconst sortForm = document.querySelector('.img-filters__form');\nconst defaultSetting = document.querySelector('#filter-default');\nconst randomSetting = document.querySelector('#filter-random');\nconst popularSetting = document.querySelector('#filter-discussed');\n\nconst getRandomArrayElement = (pictures) => {\n  return pictures[getRandom(0, pictures.length - 1)];\n};\n\nconst getRandomArray = (pictures, randomArrayLength) => {\n  if (pictures.length <= randomArrayLength) {\n    return pictures;\n  }\n  const OriginalPictures = new Set();\n  while (OriginalPictures.size < randomArrayLength) {\n    OriginalPictures.add(getRandomArrayElement(pictures));\n  }\n  return Array.from(OriginalPictures);\n};\n\nconst sortRandom = function (pictures) {\n  return getRandomArray(pictures, RANDOM_PICTURES_NUMBER);\n};\n\nconst sortDefault = function (pictures) {\n  return pictures;\n};\n\nconst sortByComments = function (pictures) {\n  return pictures.slice().sort((a, b) => b.comments.length - a.comments.length);\n};\n\nconst sortImages = function (pictures) {\n  sort.classList.remove('img-filters--inactive');\n  sortForm.addEventListener('click', _.debounce ((evt) => {\n    if (!evt.target.classList.contains('img-filters__button--active')) {\n      const activeButton = document.querySelector('.img-filters__button--active');\n      if (activeButton) {\n        activeButton.classList.remove('img-filters__button--active');\n        evt.target.classList.add('img-filters__button--active');\n      }\n    }\n    if (defaultSetting.classList.contains('img-filters__button--active')) {\n      renderPictures(sortDefault(pictures));\n    } else if (randomSetting.classList.contains('img-filters__button--active')) {\n      renderPictures(sortRandom(pictures));\n    } else if (popularSetting.classList.contains('img-filters__button--active')) {\n      renderPictures(sortByComments(pictures));\n    }\n  }, SET_DELAY))\n};\nexport { sortImages };\n","import { renderPictures } from './render-pictures.js';\nimport { showAlert, args } from './util.js';\nimport { sortImages } from './sort-images.js';\nconst formSubmit = document.querySelector('.img-upload__form');\nconst getData = function (onFailure) {\n  fetch('https://22.javascript.pages.academy/kekstagram/data')\n    .then((response) => {\n      if (response.ok) {\n        response\n          .json()\n          .then((picturesArray) => {\n            renderPictures(picturesArray);\n            sortImages(picturesArray);\n          })\n      } else {\n        onFailure(\n          'Не удалось получить данные от сервера. Попробуйте перезагрузить страницу или зайти позже.');\n      }\n    })\n\n    .catch(() => {\n      onFailure(\n        'Не удалось получить данные от сервера. Попробуйте перезагрузить страницу или зайти позже.');\n    });\n};\nconst sendData = function (onSuccess, onFailure, body) {\n  fetch('https://22.javascript.pages.academy/kekstagram', {\n    method: 'POST',\n    body,\n  })\n    .then((response) => {\n      if (response.ok) {\n        onSuccess();\n      } else {\n        onFailure('Не удалось отправить данные на сервер. Попробуйте ещё раз.');\n      }\n    })\n    .catch(() => {\n      onFailure('Не удалось отправить данные на сервер. Попробуйте ещё раз.');\n    });\n};\n\nconst setUserFormSubmit = function () {\n  formSubmit.addEventListener('submit', function (evt) {\n    evt.preventDefault();\n    sendData(\n      () => showAlert(args.successId, args.successClass),\n      () => showAlert(args.errorId, args.errorClass),\n      new FormData(evt.target));\n  });\n};\n\nexport { getData, setUserFormSubmit };\n","import { closeOnEscButtonOverlay, closeOverlay } from './util.js';\nconst upload = document.querySelector('#upload-file');\nconst body = document.querySelector('body');\nconst overlay = document.querySelector('.img-upload__overlay');\nconst closeModal = document.querySelector('#upload-cancel');\nconst imageContainer = document.querySelector('.img-upload__preview');\nconst innerImage = imageContainer.querySelector('img');\n\nconst FILE_TYPES = ['jpg', 'jpeg', 'png', 'gif'];\n\ndocument.addEventListener('dragover', (evt) => evt.preventDefault());\ndocument.addEventListener('drop', (evt) => evt.preventDefault());\n\nconst replaceImage = function() {\n  let file = upload.files[0];\n  const fileName = file.name.toLowerCase();\n  const matches = FILE_TYPES.some((it) => {\n    return fileName.endsWith(it);\n  });\n  if (matches) {\n    const reader = new FileReader();\n    reader.addEventListener('load',function () {\n      innerImage.src = reader.result;\n    });\n    if (file) {\n      reader.readAsDataURL(file);\n    } else {\n      innerImage.src = '';\n    }\n  }\n}\n\nupload.addEventListener('change', function (evt) {\n  evt.preventDefault();\n  overlay.classList.remove('hidden');\n  body.classList.add('modal-open');\n  replaceImage();\n  upload.value = '';\n});\n\ncloseModal.addEventListener('click', closeOverlay);\n\nwindow.addEventListener('keydown', closeOnEscButtonOverlay);\n\nexport { imageContainer, innerImage };\n","import { innerImage } from './replace-image.js';\nconst lessSizeButton = document.querySelector('.scale__control--smaller');\nconst moreSizeButton = document.querySelector('.scale__control--bigger');\nconst currentSize = document.querySelector('.scale__control--value');\nconst settings = {\n  step: 25,\n  min: 25,\n  max: 100,\n}\nconst changeScale = function(){\n  lessSizeButton.addEventListener('click', function () {\n    let sum = (currentSize.value = currentSize.value.replace(/[%]/g, '') - settings.step);\n\n    if (sum < settings.min) {\n      currentSize.value = settings.min;\n      lessSizeButton.disabled = true;\n    } else {\n      lessSizeButton.disabled = false;\n      moreSizeButton.disabled = false;\n    }\n    innerImage.style.transform = 'scale(0.' + currentSize.value + ')';\n    currentSize.value += '%';\n  });\n\n  moreSizeButton.addEventListener('click', function () {\n    let sum = (currentSize.value = +currentSize.value.replace(/[%]/g, '') + settings.step);\n    if (sum > settings.max) {\n      currentSize.value = settings.max;\n      moreSizeButton.disabled = true;\n    } else {\n      lessSizeButton.disabled = false;\n    }\n\n    if(currentSize.value < settings.max){\n      innerImage.style.transform = 'scale(0.' + currentSize.value + ')';\n    } else{\n      innerImage.style.transform = 'scale(1)'\n    }\n    currentSize.value += '%';\n  });\n}\n\nchangeScale();\n","import { createSlider } from './util.js';\nimport { imageContainer } from './replace-image.js'\nconst sliderElement = document.querySelector('.effect-level__slider');\nconst valueElement = document.querySelector('.effect-level__value');\nconst noEffectButton = document.querySelector('#effect-none');\nconst chromeEffectButton = document.querySelector('#effect-chrome');\nconst sepiaEffectButton = document.querySelector('#effect-sepia');\nconst marvinEffectButton = document.querySelector('#effect-marvin');\nconst phobosEffectButton = document.querySelector('#effect-phobos');\nconst heatEffectButton = document.querySelector('#effect-heat');\n\nconst settings = {\n  chrome: 'grayscale',\n  sepia: 'sepia',\n  marvin: 'invert',\n  phobos: 'blur',\n  heat: 'brightness',\n  percent: '%',\n  pixel: 'px',\n  empty: '',\n};\n\nlet innerImage = imageContainer.querySelector('img');\nvalueElement.value = 0;\n\nconst updateFilter = function (filterName, unit) {\n  sliderElement.noUiSlider.on('update', (_, handle, unencoded) => {\n\n    valueElement.value = unencoded[handle];\n    innerImage.style.filter =\n      '' + filterName + '(' + valueElement.value + unit + ')';\n  });\n};\n\nnoEffectButton.addEventListener('change', function (evt) {\n  if (evt.target.checked) {\n    innerImage.style.filter = 'none';\n    valueElement.setAttribute('step', '0.1');\n    sliderElement.noUiSlider.destroy();\n  }\n});\n\nchromeEffectButton.addEventListener('change', function (evt) {\n\n  if(!sliderElement.classList.contains('noUi-target')){\n    createSlider();\n  }\n\n  sliderElement.noUiSlider.updateOptions({\n    range: {\n      min: 0,\n      max: 1,\n    },\n    start: 0,\n    step: 0.1,\n  });\n\n  if (evt.target.checked) {\n    sliderElement.noUiSlider.set(0);\n    innerImage.style.filter = 'none';\n    valueElement.setAttribute('step', '0.1');\n    updateFilter(settings.chrome, settings.empty);\n  }\n});\n\nsepiaEffectButton.addEventListener('change', function (evt) {\n  if(!sliderElement.classList.contains('noUi-target')){\n    createSlider();\n  }\n  sliderElement.noUiSlider.updateOptions({\n    range: {\n      min: 0,\n      max: 1,\n    },\n    start: 0,\n    step: 0.1,\n  });\n  if (evt.target.checked) {\n    sliderElement.noUiSlider.set(0);\n    innerImage.style.filter = 'none';\n    valueElement.setAttribute('step', '0.1');\n    updateFilter(settings.sepia, settings.empty);\n  }\n});\n\nmarvinEffectButton.addEventListener('change', function (evt) {\n  if(!sliderElement.classList.contains('noUi-target')){\n    createSlider();\n  }\n  sliderElement.noUiSlider.updateOptions({\n    range: {\n      min: 0,\n      max: 100,\n    },\n    start: 0,\n    step: 1,\n  });\n  if (evt.target.checked) {\n    sliderElement.noUiSlider.set(0);\n    innerImage.style.filter = 'none';\n    valueElement.setAttribute('step', '1');\n    updateFilter(settings.marvin, settings.percent);\n  }\n});\n\nphobosEffectButton.addEventListener('change', function (evt) {\n  if(!sliderElement.classList.contains('noUi-target')){\n    createSlider();\n  }\n  sliderElement.noUiSlider.updateOptions({\n    range: {\n      min: 0,\n      max: 3,\n    },\n    start: 0,\n    step: 0.1,\n  });\n  if (evt.target.checked) {\n    sliderElement.noUiSlider.set(0);\n    innerImage.style.filter = 'none';\n    valueElement.setAttribute('step', '0.1');\n    updateFilter(settings.phobos, settings.pixel);\n  }\n});\n\nheatEffectButton.addEventListener('change', function (evt) {\n  if(!sliderElement.classList.contains('noUi-target')){\n    createSlider();\n  }\n  sliderElement.noUiSlider.updateOptions({\n    range: {\n      min: 1,\n      max: 3,\n    },\n    start: 1,\n    step: 0.1,\n  });\n  if (evt.target.checked) {\n    sliderElement.noUiSlider.set(1);\n    innerImage.style.filter = 'none';\n    valueElement.setAttribute('step', '0.1');\n    updateFilter(settings.heat, settings.empty);\n  }\n});\n\nexport { valueElement };\n","import { closeOnEscButtonOverlay } from './util.js';\n\nconst hashtagInput = document.querySelector('.text__hashtags');\nconst commentTextArea = document.querySelector('.text__description');\nconst HASHTAG_LENGTH = 20;\nconst MAX_HASHTAG_NUMBER = 5;\n\nconst isValidHastag = (input) => {\n  return /^\\w+$/.test(input) && !(~input.indexOf('_'));\n}\n\nconst checkOriginality = function (hashtags) {\n  const originalHashtag = [];\n  let originality = true;\n  hashtags.forEach((hashtag) => {\n    const hashtagLowerCase = hashtag.toLowerCase();\n    if (originalHashtag.includes(hashtagLowerCase)) {\n      originality = false;\n    } else {\n      originalHashtag.push(hashtagLowerCase);\n    }\n  });\n  return originality;\n};\n\nconst validateHashtag = function (input) {\n  let error = '';\n  if (input.slice(0, 1) !== '#') {\n    error = 'Хэштег должен начинаться с решётки';\n  } else if (!isValidHastag(input.slice(1))) {\n    error = 'Хэштэг не должен содержать спецсимволы';\n  } else if (input.length > HASHTAG_LENGTH) {\n    error =\n      'Хэштег не должен быть длиннее 20 символов (включая символ решётки)';\n  }\n  return error;\n};\n\nconst checkHashtagInput = function (input) {\n  let error = '';\n  const erorrsArray = [];\n  const hashtags = input.split(' ');\n  if (hashtags.length > MAX_HASHTAG_NUMBER) {\n    erorrsArray.push('Количество хэштегов не должно привышать 5');\n  }\n  if (!checkOriginality(hashtags)) {\n    erorrsArray.push('Хэштег не может повторяться');\n  }\n  hashtags.forEach((hashtag) => {\n    error = validateHashtag(hashtag);\n    if (error) {\n      erorrsArray.push(error);\n    }\n  });\n  error = erorrsArray.join(', ');\n  return error;\n};\n\nhashtagInput.onfocus = function () {\n  window.removeEventListener('keydown', closeOnEscButtonOverlay);\n};\nhashtagInput.onblur = function () {\n  window.addEventListener('keydown', closeOnEscButtonOverlay);\n};\n\nhashtagInput.addEventListener('change', function () {\n  if(hashtagInput.value.slice(-1) === ' ') {\n    hashtagInput.value = hashtagInput.value.trim();\n  } else{\n    hashtagInput.setCustomValidity(checkHashtagInput(hashtagInput.value))\n  }\n});\n\ncommentTextArea.onfocus = function () {\n  window.removeEventListener('keydown', closeOnEscButtonOverlay);\n};\ncommentTextArea.onblur = function () {\n  window.addEventListener('keydown', closeOnEscButtonOverlay);\n};\n"],"sourceRoot":""}